/*
 FlexSearch v0.2.68
 Copyright 2018 Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(e,x,p){var t;(t=p.define)&&t.amd?t([],function(){return x}):(t=p.modules)?t[e.toLowerCase()]=x:"undefined"!==typeof module?module.exports=x:p[e]=x})("FlexSearch",function(){function e(a){"string"!==typeof a||v[a]||(a=D[a]);a||(a=y);this.id=a.id||I++;this.init(a);x(this,"index",function(){return this.a});x(this,"length",function(){return Object.keys(this.a).length})}function x(a,b,c){Object.defineProperty(a,b,{get:c})}function p(a){return new RegExp(a,"g")}function t(a,b,c){if("undefined"===
typeof c){for(c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}return a.replace(b,c)}function A(a,b,c,d,f,m,g){if("undefined"===typeof b[c]){var h=f?(9-(g||6))*m+(g||6)*f:m;b[c]=h;h>=g&&(a=a[h+.5|0],a=a[c]||(a[c]=[]),a[a.length]=d)}return h||b[c]}function B(a,b){if(a)for(var c=Object.keys(a),d=0,f=c.length;d<f;d++){var m=c[d],g=a[m];if(g)for(var h=0,k=g.length;h<k;h++)if(g[h]===b){1===k?delete a[m]:g.splice(h,1);break}else"object"===typeof g[h]&&B(g[h],b)}}function E(a){var b=[];if(!a)return b;
for(var c=0,d=0,f=0,m="",g=a.length,h=0;h<g;h++){var k=a[h];"a"===k||"e"===k||"i"===k||"o"===k||"u"===k||"y"===k?c++:d++;" "!==k&&(m+=k);if(" "===k||c>=(8<g?2:1)&&2<=d||2<=c&&d>=(8<g?2:1)||h===g-1)m&&(b[f]&&2<m.length&&f++,b[f]=b[f]?b[f]+m:m," "===k&&f++,m=""),d=c=0}return b}function J(a,b){a=a.length-b.length;return 0>a?1:0<a?-1:0}function K(a,b){a=a.length-b.length;return 0>a?-1:0<a?1:0}function L(a,b,c){var d=[],f=[],m=a.length;if(1<m){a.sort(K);for(var g=u(),h=a[0],k=h.length,z=0;z<k;)g[h[z++]]=
1;for(var q,e=0,n=1;n<m;){var l=!1,p=n===m-1;f=[];h=a[n];k=h.length;for(z=-1;z<k;){var r=g[q=h[++z]];if(r===n){if(p&&(d[e++]=q,b&&e===b))return d;l=!0;g[q]=n+1}else c&&(r=f[r]||(f[r]=[]),r[r.length]=q)}if(!l&&!c)break;n++}if(c&&(b||(b=1E3),e=d.length,k=f.length,e<b&&k))for(n=k-1;0<=n;n--)if(q=f[n])for(z=0;z<q.length;z++)if(d[e++]=q[z],b&&e===b)return d}else m&&(d=a[0],b&&d.length>b&&(d=d.slice(0,b)));return d}function u(a,b,c){if(c){for(var d=Array(c),f=0;f<c;f++)d[f]=u(a,b);return d}return Object.create(a||
null,b)}var y={encode:"icase",mode:"forward",f:!1,cache:!1,async:!1,i:!1,threshold:0,depth:0},D={memory:{encode:"extra",mode:"strict",threshold:7},speed:{encode:"icase",mode:"strict",threshold:7,depth:2},match:{encode:"extra",mode:"full"},score:{encode:"extra",mode:"strict",threshold:5,depth:4},balance:{encode:"balance",mode:"ngram",threshold:6,depth:3},fastest:{encode:"icase",mode:"strict",threshold:9,depth:1}},C=[],I=0,F=p("[ -/]"),G=u(),H=u(),v=function(){for(var a=Object.getOwnPropertyNames({}.__proto__),
b=u(),c=0;c<a.length;c++)b[a[c]]=1;return b}();e.new=function(a){return new this(a)};e.create=function(a){return e.new(a)};e.registerMatcher=function(a){for(var b in a)a.hasOwnProperty(b)&&C.push(p(b),a[b]);return this};e.registerEncoder=function(a,b){v[a]||(w[a]=b);return this};e.registerLanguage=function(a,b){v[a]||(G[a]=b.filter,H[a]=b.stemmer);return this};e.encode=function(a,b){return v[a]?b:w[a].call(w,b)};e.prototype.init=function(a){this.h=[];a||(a=y);var b=a.profile;b=b&&!v[b]?D[b]:u();this.mode=
a.mode||b.mode||this.mode||y.mode;this.threshold=a.threshold||b.threshold||this.threshold||y.threshold;this.depth=a.depth||b.depth||this.depth||y.depth;this.f=a.suggest||this.f||y.f;this.c=(b=a.encode||b.encode)&&!v[b]&&w[b]||("function"===typeof b?b:this.c||!1);(b=a.matcher)&&this.addMatcher(b);if((b=a.filter)&&!v[b]){var c=G[b]||b,d=this.c,f=u();if(c)for(var m=0;m<c.length;m++){var g=d?d.call(w,c[m]):c[m];f[g]=String.fromCharCode(65E3-c.length+m)}this.filter=f}if((b=a.stemmer)&&!v[b]){a=H[b]||b;
b=this.c;c=[];if(a)for(var h in a)a.hasOwnProperty(h)&&(d=b?b.call(w,h):h,c.push(p("(?=.{"+(d.length+3)+",})"+d+"$"),b?b.call(w,a[h]):a[h]));this.stemmer=c}this.g=u(null,void 0,10);this.b=u();this.a=u();u();return this};e.prototype.encode=function(a){a&&C.length&&(a=t(a,C));a&&this.h.length&&(a=t(a,this.h));a&&this.c&&(a=this.c.call(w,a));a&&this.stemmer&&(a=t(a,this.stemmer));return a};e.prototype.addMatcher=function(a){var b=this.h,c;for(c in a)a.hasOwnProperty(c)&&b.push(p(c),a[c]);return this};
e.prototype.add=function(a,b,c){if("string"===typeof b&&b&&(a&&!v[a]||0===a))if(this.a[a]&&!c)this.update(a,b);else{b=this.encode(b);if(!b.length)return this;c=this.mode;b="function"===typeof c?c(b):"ngram"===c?E(b):b.split(F);for(var d={_ctx:u()},f=this.threshold,m=this.depth,g=this.g,h=b.length,k=0;k<h;k++){var e=""+b[k];if(e){var q=e.length,p=(h-k)/h;switch(c){case "reverse":case "both":for(var n="",l=q-1;1<=l;l--)n=e[l]+n,A(g,d,n,a,(q-l)/q,p,f);case "forward":n="";for(l=0;l<q;l++)n+=e[l],A(g,
d,n,a,1,p,f);break;case "full":for(l=0;l<q;l++)for(var t=(q-l)/q,r=q;r>l;r--)n=e.substring(l,r),A(g,d,n,a,t,p,f);break;default:if(l=A(g,d,e,a,1,p,f),m&&1<h&&l>=f)for(q=d._ctx[e]||(d._ctx[e]=u()),e=this.b[e]||(this.b[e]=u(null,void 0,10)),l=k-m,r=k+m+1,0>l&&(l=0),r>h&&(r=h);l<r;l++)l!==k&&A(e,q,b[l],a,0,10-(l<k?k-l:l-k),f)}}}this.a[a]="1"}return this};e.prototype.update=function(a,b){this.a[a]&&b&&"string"===typeof b&&(this.remove(a),this.add(a,b,!0));return this};e.prototype.remove=function(a){if(this.a[a]&&
!v[a]){for(var b=0;10>b;b++)B(this.g[b],a);this.depth&&B(this.b,a);delete this.a[a]}return this};e.prototype.search=function(a,b,c){var d=[];if(a&&"object"===typeof a){c=a.callback||b;b=a.limit;var f=a.threshold;a=a.query}f=(f||this.threshold||0)|0;"function"===typeof b?(c=b,b=1E3):b||(b=1E3);if(c){var e=this;M(function(){c(e.search(a,b));e=null},1,"search-"+this.id);return null}if(!a||"string"!==typeof a)return d;var g=this.encode(a);if(!g.length)return d;var h=this.mode;g="function"===typeof h?
h(g):"ngram"===h?E(g):g.split(F);h=g.length;var k=!0,p=[],q=u();if(1<h)if(this.depth){var t=!0,n=g[0];q[n]="1"}else g.sort(J);var l;if(!t||(l=this.b)[n])for(var v=t?1:0;v<h;v++){var r=g[v];if(r&&!q[r]){for(var w,x=!1,y=[],A=0,B=9;B>=f;B--)if(w=(t?l[n]:this.g)[B][r])y[A++]=w,x=!0;if(x)p[p.length]=1<A?p.concat.apply([],y):y[0];else if(!this.f){k=!1;break}q[r]="1"}n=r}else k=!1;k&&(d=L(p,b,this.f));return d};e.prototype.reset=function(){this.destroy();return this.init()};e.prototype.destroy=function(){this.filter=
this.stemmer=this.g=this.b=this.a=null;return this};var w=Object.create({icase:function(a){return a.toLowerCase()},balance:function(){var a=[p("[-/]")," ",p("[^a-z0-9 ]"),"",p("\\s\\s+")," "];return function(b){b=t(b.toLowerCase(),a);for(var c="",d="",f="",e=0;e<b.length;e++){var g=b[e];if(g!==d)if(e&&"h"===g){if(f="a"===f||"e"===f||"i"===f||"o"===f||"u"===f||"y"===f,("a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d)&&f||" "===d)c+=g}else c+=g;f=e===b.length-1?"":b[e+1];d=g}return c}}()}),M=null;
return e}(!1),this);
